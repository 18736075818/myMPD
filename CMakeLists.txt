cmake_minimum_required(VERSION 2.6)

project (ympd)

SET(CPACK_PACKAGE_DESCRIPTION_SUMMARY "MPD web client based on Websockets and
Bootstrap")
SET(CPACK_PACKAGE_VENDOR "Andrew Karpow <andy@ndyk.de>")
SET(CPACK_PACKAGE_VERSION_MAJOR "0")
SET(CPACK_PACKAGE_VERSION_MINOR "1")
SET(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${PROJECT_SOURCE_DIR}/cmake/")

FIND_PACKAGE(LibWebSockets REQUIRED)
FIND_PACKAGE(LibMPDClient REQUIRED)
INCLUDE(CheckCSourceCompiles)
INCLUDE(CPack)

SET(SOURCES
    src/ympd.c
    src/http_server.c
    src/mpd_client.c
    )

ADD_EXECUTABLE(ympd ${SOURCES})
ADD_DEFINITIONS(-DDATADIR="${CMAKE_INSTALL_PREFIX}/share/${PROJECT_NAME}")

TARGET_LINK_LIBRARIES(ympd ${LIBMPDCLIENT_LIBRARY} ${LIBWEBSOCKETS_LIBRARIES})

INSTALL(TARGETS ympd DESTINATION bin)
INSTALL(DIRECTORY htdocs DESTINATION share/${PROJECT_NAME})

